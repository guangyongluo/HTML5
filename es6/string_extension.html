<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>å­—ç¬¦ä¸²æ‰©å±•</title>
	</head>
	<body>
		<script type="text/javascript">
			//  Unicodeæ˜¯ä¸€ç§å­—ç¬¦çš„ç¼–ç æ–¹å¼ï¼Œå¯ä»¥å°†ä¸€ä¸ªå­—ç¬¦å¯¹åº”æˆä¸€ä¸ªæ•°å­—
			// \uxxxx  xxxxè¡¨ç¤º16è¿›åˆ¶çš„æ•°å­—   \u0000åˆ°\uFFFF
			// Unicode2ï¼šğŸ’  \u1f412
			var s = "ä¸­";
			console.log(s.length);
			console.log("ä¸­:" + s.charCodeAt(0).toString(16)); // \u4e2d
			console.log("ä¸­:" + s.codePointAt(0).toString(16)); // \u4e2d
			console.log("\u4e2d");
			console.log("\u{1f412}");  // unicode2
			var ss = "ğŸ’";
			console.log(ss.length);
			console.log("ğŸ’:" + ss.charCodeAt(0).toString(16));
			console.log("ğŸ’:" + ss.charCodeAt(1).toString(16));
			console.log("\ud83d\udc12");  // utf-16
			// unicode1ï¼š65536  
			//  è·å–unicode2ç¼–ç 
			console.log("ğŸ’:" + ss.codePointAt(0).toString(16));
			console.log("ğŸ’:" + ss.codePointAt(1).toString(16));
			
			/*
			 * 0x1f412  äºŒè¿›åˆ¶ï¼š1111 0100 0001 0010
			 * è½¬æ¢ä¸ºutf-16
			 * (1)  unicode2ç¼–ç å‡å» 0x10000 
			 * 0x1f412 - 0x10000 = 0xf412(0000111101 0000010010)
			 * (2) é«˜ä½ï¼š0xD800..0xDBFF
			 * 0000111101 + 0xD800ï¼ˆ1101 1000 0000 0000ï¼‰ = 1101 1000 0011 1101(é«˜16ä½)[0xD83D]
			 * (3) ä½ä½ï¼š0xDC00
			 * 0000010010 + 0xDC00ï¼ˆ1101 1100 0000 0000ï¼‰ = 1101 1100 0001 0010(ä½16ä½)[0xDC12]
			 * 
			 */
			
			function is32Bit(c){
					return c.codePointAt(0) > 0xFFFF;
			}
			console.log(is32Bit("ä¸­"));
			console.log(is32Bit("a"));
			console.log(is32Bit("ğŸ’"));
			
			
			// ES5 String.fromCharCode()  ä¸èƒ½å¤„ç†è¶…è¿‡0xFFFF
			console.log(String.fromCharCode(0x9f99));
			// 0x1f412
			console.log(String.fromCharCode(0x1f412));
			console.log(String.fromCodePoint(0x1f412));
			
			
			// ES6ä¸ºå­—ç¬¦ä¸²æ·»åŠ äº†éå†å™¨æ¥å£ï¼Œä½¿å­—ç¬¦ä¸²å¯ä»¥ç”±for...ofå¾ªç¯éå†
			for(let c of 'world'){
				console.log(c);
			}
			var text = String.fromCodePoint(0x1f412);
			for(let i = 0; i < text.length;i++){
				console.log(text[i]);
			}
			
			for(let i of text){
				console.log(i);
			}
			
			//  ES5:indexOf
			console.log("abcde".indexOf("cd",0));
			
			// ES6
			// includes()ï¼šbooleanï¼Œtrueï¼šè¡¨ç¤ºå­å­—ç¬¦ä¸²åœ¨åŸå­—ç¬¦ä¸²ä¸­å­˜åœ¨ï¼Œfalseï¼šè¡¨ç¤ºä¸å­˜åœ¨
			// startsWith():boolean, true:è¡¨ç¤ºåŸå­—ç¬¦ä¸²æ˜¯ä»¥æŒ‡å®šå­å­—ç¬¦ä¸²å¼€å¤´
			// endsWith():boolean,true:è¡¨ç¤ºåŸå­—ç¬¦ä¸²æ˜¯ä»¥æŒ‡å®šå­å­—ç¬¦ä¸²ç»“å°¾
			
			console.log("hello world".includes("w"));
			console.log("hello world".startsWith("hello"));
			console.log("hello world".endsWith("world1"));
			
			//  repeatï¼šå°†ä¸€ä¸ªå­—ç¬¦ä¸²é‡å¤næ¬¡
			console.log("x".repeat(5));
			console.log("hello".repeat(10));
			console.log("h".repeat(0));  // è¾“å‡ºé•¿åº¦ä¸º0çš„å­—ç¬¦ä¸²
			
			//  å¦‚æœrepeatæ–¹æ³•çš„å‚æ•°æ˜¯æµ®ç‚¹æ•°ï¼Œä¼šå°†æµ®ç‚¹æ•°è½¬æ¢ä¸ºæ•´æ•°
			//  é‡‡ç”¨çš„æ˜¯èˆå»çš„å–æ•´æ–¹æ³•
			console.log("wow".repeat(2.3));  // 2.3 => 2
			console.log("wow".repeat(2.9));  // 2.9 => 2
			
			// å¦‚æœrepeatæ–¹æ³•çš„å‚æ•°æ˜¯è´Ÿæ•°æˆ–Infinity
			//"ha".repeat(-1); // æŠ›å‡ºå¼‚å¸¸
			//"ha".repeat(Infinity);  // æŠ›å‡ºå¼‚å¸¸
			
			// ç‰¹ä¾‹ï¼š0åˆ°-1ä¹‹é—´çš„æµ®ç‚¹æ•°ï¼Œç­‰åŒäº0
			console.log("ha".repeat(-0.5));
			console.log("ha".repeat(NaN)); 
			
			//  å¦‚æœrepeatæ–¹æ³•çš„å‚æ•°æ˜¯å­—ç¬¦ä¸²ï¼Œä¼šå…ˆå°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å€¼å‹å†è¿›è¡Œå¤„ç†
			console.log("ok".repeat("4"));
			console.log("ok".repeat('ok'));  // å¦‚æœå­—ç¬¦ä¸²å‚æ•°å€¼æ— æ³•è½¬æ¢ä¸ºæ•°å€¼ï¼Œç­‰åŒäº0
			
			// æ¨¡æ¿å­—ç¬¦ä¸²æ˜¯ä¸€ç§å¢å¼ºå‹çš„å­—ç¬¦ä¸²
			// 'abcd'ã€"abcd"
			// `abcd`
			// ä¿ç•™å­—ç¬¦ä¸²çš„æ ¼å¼
			/*console.log("hello world");*/
			console.log(`hello 
			world`);
			
			var name = "Bill";
			//var s = "ä½ çš„åå­—æ˜¯${name}";
			var s = `ä½ çš„åå­—æ˜¯${name}`;
			console.log(s);
			
			// å¤§æ‹¬å·å†…å¯ä»¥æ”¾ä»»ä½•è¡¨è¾¾å¼ï¼Œå¯ä»¥è¿›è¡Œè¿ç®—
			var x = 20;
			var y = 30;
			console.log("${x} + ${y} = ${x + y}");
			console.log(`${x} + ${y} = ${x + y}`);
			
			//  æ¨¡æ¿å­—ç¬¦ä¸²ä¸­è¿˜èƒ½è°ƒç”¨å‡½æ•°
			function fun()
			{
				return "It's beautiful";
			}
			console.log(`wow ${fun()}`);
			
			// å¦‚æœå¤§æ‹¬å·å†…éƒ¨æ˜¯å­—ç¬¦ä¸²ï¼ŒæŒ‰åŸæ ·è¾“å‡º
			console.log(`Hello ${'world'}`);
			
			//  å¦‚æœå¤§æ‹¬å·å†…éƒ¨å¼•ç”¨çš„å˜é‡ä¸å­˜åœ¨ï¼Œä¼šæŠ›å‡ºå¼‚å¸¸
			//console.log(`This is a ${abc}`);
			
			//  å¼•ç”¨æ¨¡æ¿å­—ç¬¦ä¸²æœ¬èº«
			//  æ–¹æ³•1ï¼š
			let str1 = 'return ' + '`Hello ${name}`';
			let func1 = new Function('name', str1);
			console.log(func1("Mike"));
			
			// æ–¹æ³•2ï¼š
			let str2 = '(name)=>`Hello ${name}`';
			let func2 = eval.call(null, str2);
			console.log(func2('Mary'));
			
			
			// æ ‡ç­¾æ¨¡æ¿ï¼šå‡½æ•°çš„ä¸€ç§ç‰¹æ®Šè°ƒç”¨å½¢å¼
					
			// ç¬¬ä¸€ç§å½¢å¼
			function func3(s, n1, n2,n3){
				console.log(s);
				console.log(n1);
				console.log(n2);
				console.log(n3);
			}
			//func3("abc", 20,30);
			
			// è°ƒç”¨æ ¼å¼ï¼šå‡½æ•°å+æ¨¡æ¿å­—ç¬¦ä¸²
			var n1 = 20;
			var n2 = 30;
			func3`abc${n1} xyz${n2}ok${n2 + n1}ddd`;
			
			//  ç¬¬äºŒç§å½¢å¼
			function func4(s){
				console.log(s);
				console.log(arguments.length);
				console.log(arguments[1]);
				console.log(arguments[2]);
				console.log(arguments[3]);
			}
			func4`abc${n1}xyz${n2}kk${n2 - n1}1024`;
			// ç¬¬ä¸‰ç§å½¢å¼
			function func5(s, ...values){
				console.log(s);
				for(var i = 0; i < values.length;i++){
					console.log(values[i]);
				}
			}
			func5`hello ${n1} world ${n2} ${n1 + n2}xyz${n2 * n1}`;
			
			// æ ‡ç­¾æ¨¡æ¿çš„åº”ç”¨
			function saferHTML(templateData){
				var s = templateData[0];
				for(var i = 1;i < arguments.length;i++){
					var arg = String(arguments[i]);
					s += arg.replace(/&/g, '&amp;')
							.replace(/</g,'&lt;')
							.replace(/>/g, '&gt;');
					s += templateData[i];
				}
				return s;
			}
			var sender = '<script>';
			var message = saferHTML`<p>${sender}has sent you a message</p>`;
			console.log(message);
			
			
			<!-- String.rawæ–¹æ³• -->
			//  ç›´æ¥è¾“å‡ºæœ€åŸå§‹çš„å­—ç¬¦ä¸²
			console.log("abc \n xyz");
			console.log(String.raw`abc \n xyz`);
			console.log(String.raw`abc \\n xyz`);
			 
			//  rawä¹Ÿå¯ä»¥ä½œä¸ºæ™®é€šå‡½æ•°ä½¿ç”¨
			// h1exl3lo
			console.log(String.raw({raw:'hello'},1,'x',3));
			console.log(String.raw({raw:['h','e','l','l','o']},1,'x',3));
		</script>
	</body>
</html>
